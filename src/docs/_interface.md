A common protocol API

TODO: mermaid + plaintext explanation of the usage